<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Objectif Up - Simulateur</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <header>
    <nav class="nav container" aria-label="Barre de navigation">
      <a href="index.html" class="logo" aria-label="Team Objectif Up">
        <span class="logo-text">Team Objectif Up</span>
      </a>
      <div class="nav-small-logo">
        <img src="Images/logo-Team-Objectif-Up.png" alt="Logo Team Objectif Up">
      </div>
      <button class="menu-toggle" aria-expanded="false" aria-label="Ouvrir le menu">☰</button>
      <ul class="nav-links" role="menubar">
        <li role="none"><a role="menuitem" href="index.html">Accueil</a></li>
        <li role="none"><a role="menuitem" href="planning.html" class="active">Plannings</a></li>
        <li role="none"><a role="menuitem" href="about.html">Qui sommes-nous</a></li>
        <li role="none"><a role="menuitem" href="legal.html">Mentions légales</a></li>
        <li role="none"><a role="menuitem" href="apprendreàapprendre.html">Apprendre à apprendre</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="simulator">
      <h1>Simulateur de Planning</h1>

      <form id="planning-form">
        <div class="row">
          <label for="startTime">Début :</label>
          <input type="time" id="startTime" required>

          <label for="hours">Heures dispo :</label>
          <input type="number" id="hours" min="0.25" step="0.25" value="3">

          <label for="mode">Méthode :</label>
          <select id="mode">
            <option value="pomodoro">Pomodoro</option>
            <option value="deep">Deep Work</option>
          </select>
        </div>

        <div class="tasks-area">
          <h2>Tâches</h2>
          <div id="tasksContainer"></div>

          <!-- Boutons de gestion des tâches -->
          <div class="task-buttons">
            <button id="addTask" type="button" class="btn-secondary">+ Ajouter une tâche</button>
            <button id="addCustomTask" type="button" class="btn-secondary">+ Tâche personnalisée</button>
            <button id="resetAll" type="button" class="btn-secondary">Tout supprimer</button>
          </div>
        </div>

        <div class="controls">
          <button id="generate" type="button" class="btn-primary">Générer mon planning</button>
        </div>
      </form>

      <div id="planning-output" class="planning-output">
        <h2>Planning généré</h2>
        <div id="timeline" class="timeline"></div>
      </div>
    </section>
  </main>

  <!-- Popup Winstreak -->
  <div id="streak-popup" class="popup">
    <div class="popup-content">
      <span class="popup-close">&times;</span>
      <p>Tu es à <span id="streak-popup-count">0</span> jours de suite !</p>
      <p>🔥 Partage ta réussite et mentionne <b>@team_objectif_up_by_nat</b> 🚀</p>
      <button id="copy-text" class="popup-btn">Copier le texte</button>
      <button id="share-instagram" class="popup-btn">Partager sur Instagram</button>
    </div>
  </div>

  <div id="streak-display" class="streak-box">🔥 0 jours</div>

  <!-- Bouton aide -->
  <button id="help-btn" class="help-btn">?</button>

  <!-- Popup aide -->
  <div id="help-popup" class="popup">
    <div class="popup-content">
      <span class="popup-close">&times;</span>
      <h2>Comment fonctionne ton planning ?</h2>
      <ul>
        <li>🕒 Choisis ton <b>heure de début</b> et le <b>nombre d’heures dispo</b>.</li>
        <li>📚 Ajoute tes <b>tâches</b> (exos, cours, DM, évaluations…)</li>
        <li>⚡ Choisis la <b>méthode</b> :
          <ul>
            <li><b>Pomodoro</b> : 40 min de travail → 5 min de pause</li>
            <li><b>Deep Work</b> : 80 min de travail → 10 min de pause</li>
          </ul>
        </li>
        <li>🔥 Chaque jour où tu génères un planning, ta <b>winstreak</b> augmente.</li>
        <li>🏆 Mentionne <b>@team_objectif_up_by_nat</b> sur Insta → tu peux apparaître dans le <b>classement hebdo</b> !</li>
      </ul>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-logo">
        <h2>TEAM Objectif Up</h2>
        <p>Ton allié pour la productivité</p>
      </div>
      <div class="footer-socials">
        <a href="https://www.instagram.com/team_objectif_up_by_nat/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@team_objectif_up_by_nat" target="_blank" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
      </div>
      <div class="footer-contact">
        <p>📩 <a href="mailto:objectifuppartage@gmail.com">objectifuppartage@gmail.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 TEAM Objectif Up — Tous droits réservés</p>
    </div>
  </footer>

  <script>
    // Popup aide
    const helpBtn = document.getElementById("help-btn");
    const helpPopup = document.getElementById("help-popup");
    helpBtn.addEventListener("click", () => helpPopup.style.display = "flex");
    helpPopup.querySelector(".popup-close").addEventListener("click", () => helpPopup.style.display = "none");
    helpPopup.addEventListener("click", (e) => { if (e.target.id === "help-popup") helpPopup.style.display = "none"; });

    // Menu mobile
    (function(){
      const menuBtn = document.querySelector('.menu-toggle');
      const navLinks = document.querySelector('.nav-links');
      if(!menuBtn || !navLinks) return;
      menuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const open = navLinks.classList.toggle('open');
        menuBtn.setAttribute('aria-expanded', open);
        menuBtn.innerText = open ? '✕' : '☰';
      });
      document.addEventListener('click', (e) => {
        if (!navLinks.contains(e.target) && !menuBtn.contains(e.target)) {
          navLinks.classList.remove('open');
          menuBtn.innerText = '☰';
        }
      });
    })();

    // Ajout d'une tâche personnalisée
    document.addEventListener("DOMContentLoaded", () => {
      const addCustomTaskBtn = document.getElementById("addCustomTask");
      const tasksContainer = document.getElementById("tasksContainer");

      addCustomTaskBtn.addEventListener("click", () => {
        const div = document.createElement("div");
        div.className = "task custom-task";
        div.innerHTML = `
          <input type="text" class="task-name" placeholder="Nom de la tâche" required>
          <input type="number" class="task-duration" min="0.25" step="0.25" placeholder="Minutes" required>
          <button type="button" class="btn-remove">❌</button>
        `;
        tasksContainer.appendChild(div);

        // Supprimer la tâche personnalisée
        div.querySelector(".btn-remove").addEventListener("click", () => div.remove());
      });
    });
  </script>
</body>
</html>
