<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Objectif Up - Simulateur</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <header>
    <nav class="nav container" aria-label="Barre de navigation">
      <a href="index.html" class="logo" aria-label="Team Objectif Up">
        <span class="logo-text">Team Objectif Up</span>
      </a>
      <div class="nav-small-logo">
        <img src="Images/logo-Team-Objectif-Up.png" alt="Logo Team Objectif Up">
      </div>
      <button class="menu-toggle" aria-expanded="false" aria-label="Ouvrir le menu">â˜°</button>
      <ul class="nav-links" role="menubar">
        <li role="none"><a role="menuitem" href="index.html">Accueil</a></li>
        <li role="none"><a role="menuitem" href="planning.html" class="active">Plannings</a></li>
        <li role="none"><a role="menuitem" href="about.html">Qui sommes-nous</a></li>
        <li role="none"><a role="menuitem" href="legal.html">Mentions lÃ©gales</a></li>
        <li role="none"><a role="menuitem" href="apprendreÃ apprendre.html">Apprendre Ã  apprendre</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="simulator">
      <h1>Simulateur de Planning</h1>

      <form id="planning-form">
        <div class="row">
          <label for="startTime">DÃ©but :</label>
          <input type="time" id="startTime" required>

          <label for="hours">Heures dispo :</label>
          <input type="number" id="hours" min="0.25" step="0.25" value="3">

          <label for="mode">MÃ©thode :</label>
          <select id="mode">
            <option value="pomodoro">Pomodoro</option>
            <option value="deep">Deep Work</option>
          </select>
        </div>

        <div class="tasks-area">
          <h2>TÃ¢ches</h2>
          <div id="tasksContainer"></div>

          <!-- Boutons de gestion des tÃ¢ches -->
          <div class="task-buttons">
            <button id="addTask" type="button" class="btn-secondary">+ Ajouter une tÃ¢che</button>
            <button id="addCustomTask" type="button" class="btn-secondary">+ TÃ¢che personnalisÃ©e</button>
            <button id="resetAll" type="button" class="btn-secondary">Tout supprimer</button>
          </div>
        </div>

        <div class="controls">
          <button id="generate" type="button" class="btn-primary">GÃ©nÃ©rer mon planning</button>
        </div>
      </form>

      <div id="planning-output" class="planning-output">
        <h2>Planning gÃ©nÃ©rÃ©</h2>
        <div id="timeline" class="timeline"></div>
      </div>
    </section>
  </main>

  <!-- Popup Winstreak -->
  <div id="streak-popup" class="popup">
    <div class="popup-content">
      <span class="popup-close">&times;</span>
      <p>Tu es Ã  <span id="streak-popup-count">0</span> jours de suite !</p>
      <p>ğŸ”¥ Partage ta rÃ©ussite et mentionne <b>@team_objectif_up_by_nat</b> ğŸš€</p>
      <button id="copy-text" class="popup-btn">Copier le texte</button>
      <button id="share-instagram" class="popup-btn">Partager sur Instagram</button>
    </div>
  </div>

  <div id="streak-display" class="streak-box">ğŸ”¥ 0 jours</div>

  <!-- Bouton aide -->
  <button id="help-btn" class="help-btn">?</button>

  <!-- Popup aide -->
  <div id="help-popup" class="popup">
    <div class="popup-content">
      <span class="popup-close">&times;</span>
      <h2>Comment fonctionne ton planning ?</h2>
      <ul>
        <li>ğŸ•’ Choisis ton <b>heure de dÃ©but</b> et le <b>nombre dâ€™heures dispo</b>.</li>
        <li>ğŸ“š Ajoute tes <b>tÃ¢ches</b> (exos, cours, DM, Ã©valuationsâ€¦)</li>
        <li>âš¡ Choisis la <b>mÃ©thode</b> :
          <ul>
            <li><b>Pomodoro</b> : 40 min de travail â†’ 5 min de pause</li>
            <li><b>Deep Work</b> : 80 min de travail â†’ 10 min de pause</li>
          </ul>
        </li>
        <li>ğŸ”¥ Chaque jour oÃ¹ tu gÃ©nÃ¨res un planning, ta <b>winstreak</b> augmente.</li>
        <li>ğŸ† Mentionne <b>@team_objectif_up_by_nat</b> sur Insta â†’ tu peux apparaÃ®tre dans le <b>classement hebdo</b> !</li>
      </ul>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-logo">
        <h2>TEAM Objectif Up</h2>
        <p>Ton alliÃ© pour la productivitÃ©</p>
      </div>
      <div class="footer-socials">
        <a href="https://www.instagram.com/team_objectif_up_by_nat/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@team_objectif_up_by_nat" target="_blank" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
      </div>
      <div class="footer-contact">
        <p>ğŸ“© <a href="mailto:objectifuppartage@gmail.com">objectifuppartage@gmail.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 TEAM Objectif Up â€” Tous droits rÃ©servÃ©s</p>
    </div>
  </footer>

  <script>
    // Popup aide
    const helpBtn = document.getElementById("help-btn");
    const helpPopup = document.getElementById("help-popup");
    helpBtn.addEventListener("click", () => helpPopup.style.display = "flex");
    helpPopup.querySelector(".popup-close").addEventListener("click", () => helpPopup.style.display = "none");
    helpPopup.addEventListener("click", (e) => { if (e.target.id === "help-popup") helpPopup.style.display = "none"; });

    // Menu mobile
    (function(){
      const menuBtn = document.querySelector('.menu-toggle');
      const navLinks = document.querySelector('.nav-links');
      if(!menuBtn || !navLinks) return;
      menuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const open = navLinks.classList.toggle('open');
        menuBtn.setAttribute('aria-expanded', open);
        menuBtn.innerText = open ? 'âœ•' : 'â˜°';
      });
      document.addEventListener('click', (e) => {
        if (!navLinks.contains(e.target) && !menuBtn.contains(e.target)) {
          navLinks.classList.remove('open');
          menuBtn.innerText = 'â˜°';
        }
      });
    })();

    // Ajout d'une tÃ¢che personnalisÃ©e
    document.addEventListener("DOMContentLoaded", () => {
      const addCustomTaskBtn = document.getElementById("addCustomTask");
      const tasksContainer = document.getElementById("tasksContainer");

      addCustomTaskBtn.addEventListener("click", () => {
        const div = document.createElement("div");
        div.className = "task custom-task";
        div.innerHTML = `
          <input type="text" class="task-name" placeholder="Nom de la tÃ¢che" required>
          <input type="number" class="task-duration" min="0.25" step="0.25" placeholder="Minutes" required>
          <button type="button" class="btn-remove">âŒ</button>
        `;
        tasksContainer.appendChild(div);

        // Supprimer la tÃ¢che personnalisÃ©e
        div.querySelector(".btn-remove").addEventListener("click", () => div.remove());
      });
    });
  </script>
</body>
</html>
